2025-07-17 07:12:45,675 - INFO - 日志系统初始化完成，日志文件: /mnt/nvme0n1/tyj/TKGQA/MY/logs/experiment_20250717_071245.log
2025-07-17 07:12:45,708 - INFO - KG文件前3行: ['head\trelation\ttail\ttimestamp', 'Abdul_Kalam\tExpress_intent_to_engage_in_diplomatic_cooperation_(such_as_policy_support)\tSocial_Worker_(India)\t2005-01-01', 'Abdul_Kalam\tMake_statement\tSwraj_Paul\t2005-01-01']
2025-07-17 07:12:46,056 - INFO - 加载KG数据: 461329行, 列名: ['head', 'relation', 'tail', 'timestamp']
2025-07-17 07:12:46,056 - INFO - 时间戳列样例: ['2005-01-01', '2005-01-01', '2005-01-01', '2005-01-01', '2005-01-01']
2025-07-17 07:12:46,060 - INFO - 加载了 10488 个实体映射和 251 个关系映射
2025-07-17 07:12:46,061 - INFO - 时间戳列数据类型: object
2025-07-17 07:12:46,076 - INFO - 时间戳列唯一值样例: ['2005-01-01' '2005-01-02' '2005-01-03' '2005-01-04' '2005-01-05']
2025-07-17 07:12:47,848 - INFO - 知识图谱预处理完成，有效数据: 461329行
2025-07-17 07:12:47,850 - INFO - 时间范围: 2005-01-01 00:00:00 到 2015-12-31 00:00:00
2025-07-17 07:12:47,850 - INFO - 系统初始化完成 - 问题数: 30, KG四元组数: 461329
2025-07-17 07:12:47,850 - INFO - 代码记录文件: /mnt/nvme0n1/tyj/TKGQA/MY/generated_codes_20250717_071246.py
2025-07-17 07:12:47,850 - INFO - 分析温度: 1.0, 代码温度: 0.0
2025-07-17 07:12:47,850 - INFO - 开始时序知识图谱问答实验...
2025-07-17 07:12:47,850 - INFO - 问题总数: 30
2025-07-17 07:12:47,850 - INFO - 知识图谱四元组数: 461329
2025-07-17 07:12:47,850 - INFO - 分析温度: 1.0
2025-07-17 07:12:47,850 - INFO - 代码温度: 0.0
2025-07-17 07:12:47,850 - INFO - 
==================================================
2025-07-17 07:12:47,850 - INFO - 开始处理问题 2000014
2025-07-17 07:12:47,850 - INFO - 问题: Who would wish to visit Ireland in July, the year of 2007?
2025-07-17 07:12:47,850 - INFO - 标准答案: ['Bertie Ahern']
2025-07-17 07:12:47,850 - INFO - ==================================================
2025-07-17 07:12:47,850 - INFO - 第一步：问题分析
2025-07-17 07:12:58,586 - INFO - 问题分析完成: {'question_type': 'entity_query', 'time_constraints': 'July 2007', 'key_entities': ['Ireland'], 'target_relations': ['Express_intent_to_visit', 'Express_intent_to_meet_or_negotiate', 'Make_statement'], 'answer_type': 'entity', 'query_strategy': '1. 首先筛选时间范围内涉及Ireland的实体和关系\n2. 重点关注2007年7月期间的活动\n3. 检查是否有实体表达访问意图或相关声明\n4. 可能需要扩展查询到间接关系(如通过外交合作等关系推断)'}
2025-07-17 07:12:58,586 - INFO - 第二步：代码生成
2025-07-17 07:13:37,318 - INFO - 代码生成成功
2025-07-17 07:13:37,318 - INFO - 第三步：执行查询
2025-07-17 07:13:37,386 - ERROR - 执行错误: __import__ not found
2025-07-17 07:13:37,387 - ERROR - 详细错误: Traceback (most recent call last):
  File "/mnt/nvme0n1/tyj/TKGQA/MY/temporal_kgqa_experiment.py", line 603, in execute_query
    results = exec_globals['query_kg'](self.kg_df.copy())
  File "<string>", line 2, in query_kg
ImportError: __import__ not found

2025-07-17 07:13:37,387 - INFO - 尝试自动修复代码
2025-07-17 07:14:09,967 - INFO - 代码修复成功
2025-07-17 07:14:09,967 - INFO - 尝试执行修复后的代码
2025-07-17 07:14:10,848 - INFO - 修复后查询成功，返回 1 个结果: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 问题 2000014 处理完成
2025-07-17 07:14:10,853 - INFO - 预测答案: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 原始标准答案: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 原始预测答案: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 标准化后的标准答案: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 标准化后的预测答案: ['Bertie Ahern']
2025-07-17 07:14:10,853 - INFO - 交集: {'Bertie Ahern'}
2025-07-17 07:14:10,853 - INFO - 评估结果: P=1.000, R=1.000, F1=1.000, EM=True
2025-07-17 07:14:10,854 - INFO - 结果已保存到: /mnt/nvme0n1/tyj/TKGQA/MY/intermediate_results_1.json
2025-07-17 07:14:11,855 - INFO - 
==================================================
2025-07-17 07:14:11,855 - INFO - 开始处理问题 2000015
2025-07-17 07:14:11,855 - INFO - 问题: In which year did Viktor Orban visit Iran for the first time?
2025-07-17 07:14:11,855 - INFO - 标准答案: ['2015']
2025-07-17 07:14:11,856 - INFO - ==================================================
2025-07-17 07:14:11,856 - INFO - 第一步：问题分析
2025-07-17 07:14:26,231 - INFO - 问题分析完成: {'question_type': 'first_event', 'time_constraints': '时间范围: 2005-01-01 00:00:00 到 2015-12-31 00:00:00', 'key_entities': ['Viktor Orban', 'Iran'], 'target_relations': ['Engage_in_diplomatic_cooperation', 'Express_intent_to_meet_or_negotiate', 'Visit'], 'answer_type': 'time', 'query_strategy': '首先在给定的时间范围内查找Viktor Orban与Iran之间的所有事件，然后筛选出与访问相关的关系（如Engage_in_diplomatic_cooperation或Express_intent_to_meet_or_negotiate），最后找出这些事件中时间最早的一个，确定其发生年份。'}
2025-07-17 07:14:26,232 - INFO - 第二步：代码生成
2025-07-17 07:15:06,097 - INFO - 代码生成成功
2025-07-17 07:15:06,097 - INFO - 第三步：执行查询
2025-07-17 07:15:06,128 - ERROR - 执行错误: __import__ not found
2025-07-17 07:15:06,128 - ERROR - 详细错误: Traceback (most recent call last):
  File "/mnt/nvme0n1/tyj/TKGQA/MY/temporal_kgqa_experiment.py", line 603, in execute_query
    results = exec_globals['query_kg'](self.kg_df.copy())
  File "<string>", line 2, in query_kg
ImportError: __import__ not found

2025-07-17 07:15:06,128 - INFO - 尝试自动修复代码
2025-07-17 07:15:37,548 - INFO - 代码修复成功
2025-07-17 07:15:37,548 - INFO - 尝试执行修复后的代码
2025-07-17 07:15:39,215 - INFO - 修复后查询成功，返回 1 个结果: ['2015']
2025-07-17 07:15:39,220 - INFO - 问题 2000015 处理完成
2025-07-17 07:15:39,220 - INFO - 预测答案: ['2015']
2025-07-17 07:15:39,220 - INFO - 原始标准答案: ['2015']
2025-07-17 07:15:39,220 - INFO - 原始预测答案: ['2015']
2025-07-17 07:15:39,220 - INFO - 标准化后的标准答案: ['2015']
2025-07-17 07:15:39,220 - INFO - 标准化后的预测答案: ['2015']
2025-07-17 07:15:39,220 - INFO - 交集: {'2015'}
2025-07-17 07:15:39,220 - INFO - 评估结果: P=1.000, R=1.000, F1=1.000, EM=True
2025-07-17 07:15:40,222 - INFO - 
==================================================
2025-07-17 07:15:40,222 - INFO - 开始处理问题 2000016
2025-07-17 07:15:40,222 - INFO - 问题: Who made optimistic remarks about Iran after the Organisation for Economic Cooperation and Development?
2025-07-17 07:15:40,222 - INFO - 标准答案: ['South Korea', 'Party Member (Iraq)', 'France', 'China', 'Iraq', 'Member of Legislative (Govt) (Iran)', 'Japan', 'Head of Government (Ukraine)', 'Thailand', 'Kazakhstan']
2025-07-17 07:15:40,222 - INFO - ==================================================
2025-07-17 07:15:40,222 - INFO - 第一步：问题分析
2025-07-17 07:15:50,286 - INFO - 问题分析完成: {'question_type': 'entity_query', 'time_constraints': '时间范围在2005-01-01到2015-12-31之间', 'key_entities': ['Organisation for Economic Cooperation and Development', 'Iran'], 'target_relations': ['Praise_or_endorse', 'Make_statement', 'Make_optimistic_remarks'], 'answer_type': 'entity', 'query_strategy': "首先查找与'Organisation for Economic Cooperation and Development'相关的事件，然后筛选出涉及'Iran'且关系为'Praise_or_endorse'或'Make_statement'的事件，最后确定在这些事件中发表乐观言论的实体。"}
2025-07-17 07:15:50,286 - INFO - 第二步：代码生成
2025-07-17 07:16:23,757 - INFO - 代码生成成功
2025-07-17 07:16:23,757 - INFO - 第三步：执行查询
2025-07-17 07:16:23,801 - ERROR - 执行错误: __import__ not found
2025-07-17 07:16:23,802 - ERROR - 详细错误: Traceback (most recent call last):
  File "/mnt/nvme0n1/tyj/TKGQA/MY/temporal_kgqa_experiment.py", line 603, in execute_query
    results = exec_globals['query_kg'](self.kg_df.copy())
  File "<string>", line 2, in query_kg
ImportError: __import__ not found

2025-07-17 07:16:23,802 - INFO - 尝试自动修复代码
2025-07-17 07:16:51,547 - INFO - 代码修复成功
2025-07-17 07:16:51,547 - INFO - 尝试执行修复后的代码
2025-07-17 07:16:52,058 - INFO - 修复后查询成功，返回 0 个结果: []
2025-07-17 07:16:52,063 - INFO - 问题 2000016 处理完成
2025-07-17 07:16:52,063 - INFO - 预测答案: []
2025-07-17 07:16:52,063 - INFO - 原始标准答案: ['South Korea', 'Party Member (Iraq)', 'France', 'China', 'Iraq', 'Member of Legislative (Govt) (Iran)', 'Japan', 'Head of Government (Ukraine)', 'Thailand', 'Kazakhstan']
2025-07-17 07:16:52,063 - INFO - 原始预测答案: []
2025-07-17 07:16:52,063 - INFO - 标准化后的标准答案: ['South Korea', 'Party Member (Iraq)', 'France', 'China', 'Iraq', 'Member of Legislative (Govt) (Iran)', 'Japan', 'Head of Government (Ukraine)', 'Thailand', 'Kazakhstan']
2025-07-17 07:16:52,063 - INFO - 标准化后的预测答案: []
2025-07-17 07:16:52,063 - INFO - 评估结果: P=0.000, R=0.000, F1=0.000, EM=False
2025-07-17 07:16:53,064 - INFO - 
==================================================
2025-07-17 07:16:53,065 - INFO - 开始处理问题 2000017
2025-07-17 07:16:53,065 - INFO - 问题: Who made optimistic remarks about Yasuo Fukuda after Japan?
2025-07-17 07:16:53,065 - INFO - 标准答案: ['Government Official (Japan)', 'China']
2025-07-17 07:16:53,065 - INFO - ==================================================
2025-07-17 07:16:53,065 - INFO - 第一步：问题分析
2025-07-17 07:17:05,005 - INFO - 问题分析完成: {'question_type': 'entity_query', 'time_constraints': '2005-01-01 00:00:00 到 2015-12-31 00:00:00', 'key_entities': ['Yasuo Fukuda', 'Japan'], 'target_relations': ['Make_statement', 'Praise_or_endorse', 'Make_optimistic_comment'], 'answer_type': 'entity', 'query_strategy': "首先识别出问题中的关键实体'Yasuo Fukuda'和'Japan'，然后查找在指定时间范围内与'Yasuo Fukuda'相关的'Make_statement'、'Praise_or_endorse'或'Make_optimistic_comment'关系。由于问题中提到了'after Japan'，可能需要进一步筛选在'Japan'之后发生的相关事件。"}
2025-07-17 07:17:05,005 - INFO - 第二步：代码生成
2025-07-17 07:17:48,685 - INFO - 代码生成成功
2025-07-17 07:17:48,685 - INFO - 第三步：执行查询
2025-07-17 07:17:48,723 - ERROR - 执行错误: __import__ not found
2025-07-17 07:17:48,723 - ERROR - 详细错误: Traceback (most recent call last):
  File "/mnt/nvme0n1/tyj/TKGQA/MY/temporal_kgqa_experiment.py", line 603, in execute_query
    results = exec_globals['query_kg'](self.kg_df.copy())
  File "<string>", line 2, in query_kg
ImportError: __import__ not found

2025-07-17 07:17:48,723 - INFO - 尝试自动修复代码
2025-07-17 07:18:27,578 - INFO - 代码修复成功
2025-07-17 07:18:27,578 - INFO - 尝试执行修复后的代码
2025-07-17 07:18:28,342 - INFO - 修复后查询成功，返回 0 个结果: []
2025-07-17 07:18:28,348 - INFO - 问题 2000017 处理完成
2025-07-17 07:18:28,348 - INFO - 预测答案: []
2025-07-17 07:18:28,348 - INFO - 原始标准答案: ['Government Official (Japan)', 'China']
2025-07-17 07:18:28,348 - INFO - 原始预测答案: []
2025-07-17 07:18:28,348 - INFO - 标准化后的标准答案: ['Government Official (Japan)', 'China']
2025-07-17 07:18:28,348 - INFO - 标准化后的预测答案: []
2025-07-17 07:18:28,348 - INFO - 评估结果: P=0.000, R=0.000, F1=0.000, EM=False
2025-07-17 07:18:29,349 - INFO - 
==================================================
2025-07-17 07:18:29,349 - INFO - 开始处理问题 2000018
2025-07-17 07:18:29,349 - INFO - 问题: In which month did Xi Jinping praise the Bahamas?
2025-07-17 07:18:29,350 - INFO - 标准答案: ['2015-01']
2025-07-17 07:18:29,350 - INFO - ==================================================
2025-07-17 07:18:29,350 - INFO - 第一步：问题分析
